// Copyright 2020 Rob Riggs <rob@mobilinkd.com>
// All rights reserved.

#include "Fsk9600Demodulator.hpp"

namespace mobilinkd { namespace tnc {

#if 0

/**
 * Generated with scipy.signal.firwin2
 *
 * fs = 96000.0
 * nq = fs / 2.0
 *
 * taps = np.array(firwin2(
 *     132,
 *     [0, 40.0/nq, 120.0/nq, 5000.0/nq, 7200.0/nq, 1.0],
 *     [0,0,.8,2,0,0], window='cosine') * 32768, dtype=int)
 *
 */
const q15_t Fsk9600Demodulator::bpf_coeffs[FILTER_TAP_NUM] = {
      -1,    -3,    -4,    -3,    -1,     0,     3,     3,     1,    -2,   -10,   -19,
     -28,   -37,   -43,   -45,   -44,   -41,   -37,   -34,   -32,   -34,   -37,   -42,
     -44,   -41,   -32,   -16,     4,    26,    42,    44,    26,   -15,   -82,  -166,
    -258,  -341,  -395,  -404,  -355,  -242,   -73,   131,   342,   520,   623,   615,
     468,   178,  -240,  -747, -1280, -1761, -2106, -2236, -2092, -1639,  -882,   138,
    1344,  2628,  3866,  4932,  5714,  6127,  6127,  5714,  4932,  3866,  2628,  1344,
     138,  -882, -1639, -2092, -2236, -2106, -1761, -1280,  -747,  -240,   178,   468,
     615,   623,   520,   342,   131,   -73,  -242,  -355,  -404,  -395,  -341,  -258,
    -166,   -82,   -15,    26,    44,    42,    26,     4,   -16,   -32,   -41,   -44,
     -42,   -37,   -34,   -32,   -34,   -37,   -41,   -44,   -45,   -43,   -37,   -28,
     -19,   -10,    -2,     1,     3,     3,     0,    -1,    -3,    -4,    -3,    -1
};


// 144k
const q15_t Fsk9600Demodulator::bpf_coeffs[FILTER_TAP_NUM] = {
   -2,   -3,   -3,   -4,   -5,   -6,   -6,   -7,   -7,   -7,   -7,   -6,   -6,   -6,
   -6,   -7,  -10,  -14,  -19,  -26,  -35,  -44,  -54,  -63,  -70,  -75,  -76,  -73,
  -64,  -50,  -30,   -6,   21,   49,   76,   99,  115,  120,  112,   89,   50,   -3,
  -71, -150, -235, -321, -400, -465, -509, -523, -501, -437, -329, -174,   25,  265,
  539,  839, 1153, 1468, 1771, 2049, 2289, 2480, 2612, 2680, 2680, 2612, 2480, 2289,
 2049, 1771, 1468, 1153,  839,  539,  265,   25, -174, -329, -437, -501, -523, -509,
 -465, -400, -321, -235, -150,  -71,   -3,   50,   89,  112,  120,  115,   99,   76,
   49,   21,   -6,  -30,  -50,  -64,  -73,  -76,  -75,  -70,  -63,  -54,  -44,  -35,
  -26,  -19,  -14,  -10,   -7,   -6,   -6,   -6,   -6,   -7,   -7,   -7,   -7,   -6,
   -6,   -5,   -4,   -3,   -3,   -2
};
#endif

/**
 * Generated with scipy.signal.firwin2
 *
 * fs = 192000.0
 * nq = fs / 2.0
 *
 * taps = np.array(firwin2(
 *     132,
 *     [0, 5600.0/nq, 9600.0/nq, 1.0],
 *     [1,2.5,0,0], window='hamming') * 32768, dtype=int)
 */
const q15_t Fsk9600Demodulator::bpf_coeffs[FILTER_TAP_NUM] = {
    2,     1,     0,    -2,    -5,    -7,    -7,    -6,    -4,    -1,     2,     5,
    6,     5,     2,     0,    -2,    -3,    -2,    -2,    -3,    -9,   -20,   -34,
  -46,   -52,   -47,   -27,     3,    39,    68,    81,    71,    36,   -15,   -70,
 -115,  -137,  -135,  -116,   -96,   -92,  -110,  -145,  -176,  -170,   -96,    57,
  272,   489,   619,   563,   243,  -361, -1192, -2101, -2868, -3243, -3005, -2022,
 -300,  1996,  4563,  7005,  8918,  9967,  9967,  8918,  7005,  4563,  1996,  -300,
-2022, -3005, -3243, -2868, -2101, -1192,  -361,   243,   563,   619,   489,   272,
   57,   -96,  -170,  -176,  -145,  -110,   -92,   -96,  -116,  -135,  -137,  -115,
  -70,   -15,    36,    71,    81,    68,    39,     3,   -27,   -47,   -52,   -46,
  -34,   -20,    -9,    -3,    -2,    -2,    -3,    -2,     0,     2,     5,     6,
    5,     2,    -1,    -4,    -6,    -7,    -7,    -5,    -2,     0,     1,     2
};


}} // mobilinkd::tnc

